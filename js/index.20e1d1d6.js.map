{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4241","webpack:///./node_modules/cesium/Source/Core sync","webpack:///./src/App.vue?2689","webpack:///./src/lib/maptalks.cesium.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","webpackEmptyContext","req","e","Error","code","keys","resolve","id","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","attrs","options","sceneOptions","forceRenderOnZooming","forceRenderOnMoving","forceRenderOnRotating","CesiumLayer","renderer","_getRenderer","scene","camera","getCesiumScene","carto","Cesium","WGS84","cartesianToCartographic","position","height","setToRedraw","maptalks","mergeOptions","backColor","CeisumLayerRenderer","prepareCanvas","h","canvas","y","_locateCamera","_renderCesiumScene","completeRender","container","document","createElement","appendChild","layer","extend","scene3DOnly","fog","enabled","backgroundColor","constrainedAxis","UNIT_Z","globe","baseColor","canvasImage","image","buffer","w","width","ctx","getContext","drawImage","imgData","getImageData","sourceData","gray","putImageData","canvasSize","frustum","aspectRatio","terrainProvider","ready","imageryLayers","imageLayers","count","imageryProvider","initializeFrame","render","now","map","getMap","center","getCenter","fov","getFov","Math","PI","atan","tan","ll","toArray","pitch","toRadians","getPitch","distance","_calcDistance","getHeight","destination","cartographicToCartesian","orientation","heading","getBearing","roll","undefined","setView","moveBackward","b","locateByPoint","requiredDistance","computeLength","CanvasRenderer","registerRenderer","mounted","init","methods","maptalksInit","cesiumInit","zoom","bearing","centerCross","url","addImageryProvider","maptms","geocoder","homeButton","timeline","navigationHelpButton","fullscreenButton","baseLayerPicker","animation","viewer","enableLighting","depthTestAgainstTerrain","_cesiumWidget","_creditContainer","style","display","flyTo","loadImager","initCameraEnd","moveEnd","addEventListener","component","Vue","config","productionTip","App","$mount"],"mappings":"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","file":"js/index.20e1d1d6.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"429a\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pbody\"},[_c('div',{attrs:{\"id\":\"cesiumContainer\"}}),_c('div',{attrs:{\"id\":\"maptalks-container\"}})])}]\n\nexport { render, staticRenderFns }","import * as maptalks from 'maptalks';\nimport * as Cesium from 'cesium/Cesium';\n\nconst options = {\n    sceneOptions : null,\n    forceRenderOnZooming : true,\n    forceRenderOnMoving : true,\n    forceRenderOnRotating : true\n};\n\nexport class CesiumLayer extends maptalks.CanvasLayer {\n    getCesiumScene() {\n        const renderer = this._getRenderer();\n        if (!renderer) {\n            return null;\n        }\n        return renderer.scene;\n    }\n\n    getCameraAltitude() {\n        const renderer = this._getRenderer();\n        if (!renderer) {\n            return 0;\n        }\n        const camera = this.getCesiumScene().camera;\n        const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n            camera.position);\n\n        return carto.height;\n    }\n\n    redraw() {\n        const renderer = this._getRenderer();\n        if (!renderer) {\n            return null;\n        }\n        return renderer.setToRedraw();\n    }\n}\n\nCesiumLayer.mergeOptions(options);\n\nconst backColor = [112, 112, 112, 255];\n\nclass CeisumLayerRenderer extends maptalks.renderer.CanvasRenderer {\n\n    needToRedraw() {\n        return true;\n    }\n\n    onAdd() {\n        this.prepareCanvas();\n    }\n\n    _adjust(p) {\n        const h = this.canvas.height / 2;\n        p.y += 20 * ((p.y - h) / h);\n        return p;\n    }\n\n    draw() {\n        this.prepareCanvas();\n        this._locateCamera();\n        this._renderCesiumScene();\n        this.completeRender();\n    }\n\n    drawOnInteracting() {\n        this.prepareCanvas();\n        this._locateCamera();\n        this._renderCesiumScene();\n        this.completeRender();\n    }\n\n    createContext() {\n        const container = document.createElement('div');\n        container.appendChild(this.canvas);\n        let sceneOptions = this.layer.options.sceneOptions || {};\n        sceneOptions = maptalks.Util.extend(sceneOptions, {\n            canvas : this.canvas,\n            scene3DOnly : true\n        });\n        this.scene = new Cesium.Scene(sceneOptions);\n        this.scene.fog.enabled = false;\n        this.scene.backgroundColor = new Cesium.Color(backColor[0] / 255, backColor[1] / 255, backColor[2] / 255, 1);\n        this.scene.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n        this.globe = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n        this.globe.baseColor = new Cesium.Color(backColor[0] / 255, backColor[1] / 255, backColor[2] / 255, 1);\n        this.scene.globe = this.globe;\n        // this.scene.globe.show = false;\n        // this.scene.skyAtmosphere = new Cesium.SkyAtmosphere();\n    }\n\n    clearCanvas() {\n        if (!this.canvas) {\n            return;\n        }\n    }\n\n    getCanvasImage() {\n        const canvasImage = super.getCanvasImage();\n        if (!canvasImage || !canvasImage.image) {\n            return canvasImage;\n        }\n        const canvas = canvasImage.image;\n        if (!this.buffer) {\n            this.buffer = document.createElement('canvas');\n        }\n        const buffer = this.buffer;\n        const w = buffer.width = canvas.width;\n        const h = buffer.height = canvas.height;\n        const ctx = buffer.getContext('2d');\n\n        ctx.drawImage(canvas, 0, 0);\n        const imgData = ctx.getImageData(0, 0, w, h);\n        const sourceData = imgData.data;\n        for (let i = 0, l = sourceData.length; i < l; i += 4) {\n            if (sourceData[i] === backColor[0] && sourceData[i + 1] === backColor[1] &&\n                sourceData[i + 2] === backColor[2] /* && sourceData[i + 3] === backColor[3] */) {\n                sourceData[i + 3] = 0;\n            } else if (this.layer.options['gray']) {\n                const gray = [sourceData[i] + sourceData[i + 1] + sourceData[i + 2]] / 3;\n                sourceData[i] = gray;\n                sourceData[i + 1] = gray;\n                sourceData[i + 2] = gray;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        canvasImage.image = buffer;\n        return canvasImage;\n    }\n\n    resizeCanvas(canvasSize) {\n        super.resizeCanvas(canvasSize);\n        if (this.canvas) {\n            this.scene.camera.frustum.aspectRatio = this.canvas.width / this.canvas.height;\n        }\n    }\n\n    _sceneReady() {\n        if (this.scene.terrainProvider && !this.scene.terrainProvider.ready) {\n            return false;\n        }\n        if (this.scene.imageryLayers) {\n            const imageLayers = this.scene.imageryLayers;\n            const count = imageLayers.length;\n            for (let i = 0; i < count; i++) {\n                if (!imageLayers.get(i).imageryProvider.ready) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    _renderCesiumScene() {\n        this.scene.initializeFrame();\n        this.scene.render(Cesium.JulianDate.now());\n    }\n\n    _locateCamera() {\n        const map = this.getMap();\n        const center = map.getCenter();//map.pointToCoord(new maptalks.Coordinate(map.cameraPosition), map.getGLZoom());\n        const scene = this.scene;\n        if (!center) {\n            return;\n        }\n\n        let fov = map.getFov() * Math.PI / 180;\n        if (this.canvas.height < this.canvas.width) {\n            const aspectRatio = this.canvas.width / this.canvas.height;\n            fov = 2 * Math.atan(Math.tan(0.5 * fov) * aspectRatio);\n        }\n        scene.camera.frustum.fov = fov;\n\n        const ll = center.toArray();\n        const pitch = toRadians(map.getPitch());\n\n        const distance = this._calcDistance(map);\n\n        const carto = new Cesium.Cartographic(toRadians(ll[0]),\n            toRadians(ll[1]));\n        if (scene.globe) {\n            const height = scene.globe.getHeight(carto);\n            carto.height = height || 0;\n        }\n        const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n        /** @type {Cesium.optionsOrientation} */\n        const orientation = {\n            pitch : pitch - Math.PI / 2,\n            heading: toRadians(map.getBearing()),\n            roll: undefined\n        };\n        scene.camera.setView({\n            destination,\n            orientation\n        });\n\n        scene.camera.moveBackward(distance);\n    }\n\n    _calcDistance(map) {\n        const canvas = this.canvas;\n        const fov = this.scene.camera.frustum.fov; // horizontal field of view\n\n        const c = map.getCenter();\n        const b = map.locateByPoint(c, -canvas.width / 2, 0);\n        const e = map.locateByPoint(c, canvas.width / 2, 0);\n        const requiredDistance = (map.computeLength(e, b) / 2) / Math.tan(fov / 2);\n\n        return requiredDistance;\n    }\n}\nCesiumLayer.registerRenderer('canvas', CeisumLayerRenderer);\n\nfunction toRadians(d) {\n    return d * Math.PI / 180;\n}\n","<template>\n  <div class=\"pbody\">\n    <div id=\"cesiumContainer\"></div>\n    <div id=\"maptalks-container\"></div>\n  </div>\n</template>\n\n<script>\nimport Cesium from 'cesium/Cesium';\nimport * as maptalks from 'maptalks';\nimport { CesiumLayer } from './lib/maptalks.cesium';\nimport 'cesium/Widgets/widgets.css';\nexport default {\n  name: 'CesiumScene',\n  data() {\n    return {};\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      this.maptalksInit();\n      this.cesiumInit();\n    },\n    maptalksInit() {\n      Cesium.BingMapsApi.defaultKey = 'ApD3P1iMWEcs7okcQD2-idlF4bgGLMqF_p6ZKYovVeX80cmjpWzR5EZs9E_I2tXn';\n      const map = new maptalks.Map('maptalks-container', {\n        center: [116.96331820577404, 36.256177496939216], //[-1.25968, 51.74625],//[121.392825741, 31.1456282355],\n        zoom: 15,\n        pitch: 64,\n        bearing: -48.,\n        // fov: 36.86989764584402,\n        centerCross: true\n        // baseLayer: new maptalks.TileLayer('googlemap', {\n        //   style: 'Satellite',\n        //   urlTemplate: 'http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}'\n        // })\n      });\n\n      const cesiumLayer = new CesiumLayer('cesium', { gray: false }).addTo(map);\n      //获取cesium scene对象\n      const scene = cesiumLayer.getCesiumScene();\n      \n\n      const maptms = new Cesium.createTileMapServiceImageryProvider({\n        url: 'maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}'\n      });\n      scene.imageryLayers.addImageryProvider(maptms);\n\n      // 加载terrain高程数据\n      scene.terrainProvider = new Cesium.createWorldTerrain();\n      // const terrainLayer = new Cesium.CesiumTerrainProvider({\n      //   url: 'srtm_60_05'\n      //   // url: 'http://assets.agi.com/stk-terraub/world',\n      //   // requestVertexNormals: true,\n      // });\n      // scene.terrainProvider = terrainLayer;\n    },\n    cesiumInit() {\n      const viewerOption = {\n        geocoder: false, // 地理位置查询定位控件\n        homeButton: false, // 默认相机位置控件\n        timeline: false, // 时间滚动条控件\n        navigationHelpButton: false, // 默认的相机控制提示控件\n        fullscreenButton: false, // 全屏控件\n        scene3DOnly: true, // 每个几何实例仅以3D渲染以节省GPU内存\n        baseLayerPicker: false, // 底图切换控件\n        animation: false, // 控制场景动画的播放速度控件\n        terrainProvider: new Cesium.createWorldTerrain() // 世界地形\n        // infoBox : false,\n        // selectionIndicator : false,\n        // shadows : true,\n        // shouldAnimate : true\n      };\n\n      const viewer = new Cesium.Viewer('cesiumContainer', viewerOption);\n      viewer.scene.globe.enableLighting = true;\n      viewer.scene.globe.depthTestAgainstTerrain = true; // 防止模型漂移\n      viewer._cesiumWidget._creditContainer.style.display = 'none'; // 隐藏版权\n      this.viewer = viewer;\n\n      // this.loadImager();\n\n      // 飞行至指定位置\n      viewer.camera.flyTo({\n        destination: Cesium.Cartesian3.fromDegrees(116.98747630488648, 36.23262766434629, 2523.9028939870395),\n        orientation: {\n          heading: 5.274448271294485,\n          pitch: -0.6991358991569188,\n          roll: 6.279643664014511\n        }\n      });\n    },\n    loadImager() {\n      const viewer = this.viewer;\n      // 添加注记\n      viewer.imageryLayers.addImageryProvider(\n        new Cesium.WebMapTileServiceImageryProvider({\n          url:\n            'cva_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cva&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=39a4ceb78b2abd7a076551494f1c4fd0',\n          layer: 'tdtAnnoLayer',\n          style: 'default',\n          format: 'image/jpeg',\n          tileMatrixSetID: 'GoogleMapsCompatible',\n          show: false\n        })\n      );\n    },\n    initCameraEnd() {\n      const viewer = this.viewer;\n      this.camera = viewer.camera;\n      viewer.scene.camera.moveEnd.addEventListener(() => {\n        // console.log(this.camera);\n        // const camera = this.camera;\n        // const heading = camera.heading;\n        // const pitch = camera.pitch;\n        // const roll = camera.roll;\n        // const position = camera.position;\n        // const cartographic = new Cesium.Cartographic.fromCartesian(position);\n        // const longitude = new Cesium.Math.toDegrees(cartographic.longitude);\n        // const latitude = new Cesium.Math.toDegrees(cartographic.latitude);\n        // const height = cartographic.height;\n        // console.log(longitude + ',' + latitude + ',' + height + ',' + heading + ',' + pitch + ',' + roll);\n      });\n    }\n  }\n};\n</script>\n\n<style>\nhtml,\nbody {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n.pbody {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n#cesiumContainer {\n  margin: 0px;\n  padding: 0px;\n  width: 50%;\n  height: 100%;\n  float: left;\n}\n#maptalks-container {\n  margin: 0px;\n  padding: 0px;\n  width: 50%;\n  height: 100%;\n  float: left;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=82936e3c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n"],"sourceRoot":""}